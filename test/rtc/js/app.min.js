(function(e){function o(e){var o=e.classList;o.contains("close-microphone")?(u.openMic(),o.toggle("close-microphone")):(u.closeMic(),o.toggle("close-microphone"))}function c(){sessionStorage.setItem("account",document.querySelector("#account").value),sessionStorage.setItem("password",document.querySelector("#password").value),t({account:document.querySelector("#account").value,password:document.querySelector("#password").value})}function n(e){var o=e.classList;o.contains("close-vol")?(document.querySelector("#remoteAudio").muted=!1,o.toggle("close-vol")):(document.querySelector("#remoteAudio").muted=!0,u.closeSpeaker(),o.toggle("close-vol"))}function t(o){var c=o&&o.account||sessionStorage.getItem("account"),n=o&&o.password||sessionStorage.getItem("password");c&&n?($('input[name="newAccount"]').val(c),$('input[name="newPassword"]').val(n),u=new e.App.WebRTC({account:c,password:n,domain:domain,wss:wss}),u.connect()):l.changePage("login"),$(".remoteControl").show(),$(".mic_btn").removeClass("off")}var l=e.App.common,u=null,r=document.querySelector("#linkman"),a=document.querySelector("#call"),s=document.querySelector("#cancel"),i=document.querySelector("#hangup"),m=document.querySelector("#reject"),d=document.querySelector("#answer"),g=document.querySelector("#volume"),S=document.querySelector("#toggle-microphone"),f=document.querySelector("#DTMF"),p=(document.querySelector("#info-message"),document.querySelector("#sendInfo"),document.querySelector("#login")),y=document.querySelector("#logout");FlyInnWeb.debug.disable("FlyInn:*"),M.FormSelect.init(document.querySelectorAll("select")),M.Modal.init(document.querySelectorAll("#dialpad-modal"),{dismissible:!1}),a.onclick=function(){r.value?(u.call(r.value),$(".caller").html(r.value)):M.toast({html:"请输入客服号码！"})},s.onclick=function(){u.cancel()},d.onclick=function(){u.answer()},i.onclick=function(){var e=confirm("确认结束?");1==e&&u.hangup()},m.onclick=function(){u.reject()},S.onclick=function(){o(this)},g.onclick=function(){n(this)},f.querySelectorAll("button").forEach(e=>{e.dataset.value&&(e.onclick=function(e){u.sendDTMF(this.dataset.value)})}),p.onclick=function(){c()},y.onclick=function(){u.unregister(),sessionStorage.clear(),e.location.replace("index.html")},e.onbeforeunload=function(){u&&(u.hangup(),u.unregister())},t(),e.onbeforeunload=function(){}})(window);